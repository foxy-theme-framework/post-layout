function jankxPostLayoutCreateTabLinksTrigger(e){for(i=0;i<e.length;i++)e[i].addEventListener("click",jankxPostLayoutTabLinkClickEvent)}function jankxPostLayoutCreateLoadMoreButtonTrigger(e){for(i=0;i<e.length;i++)e[i].addEventListener("click",jankxPostLayoutTabLinkClickEvent)}function jankxPostLayoutTabLinkClickEvent(e){e.preventDefault();var t=e.target,a=t.dataset.loadMore||!1,s=a?t:t.parent(),r=null,o=null,n={};if(a)r=document.getElementById(s.dataset.loadMore);else{if((o=s.findParent(".jankx-tabs")).hasClass("blocked"))return;var l=s.dataset.type,u=s.dataset.typeName,d=s.dataset.objectId;if(!(l&&u&&d))return;Object.assign(n,{data_type:l,type_name:u,object_id:d});var p=o.find(".the-tab.active"),c=o.findParent(".jankx-parent-layout");r=c.find(".jankx-post-layout-wrap"),o.addClass("blocked"),p.removeClass("active"),s.addClass("active")}if(r){var b=r.dataset.postType,x=r.dataset.postsPerPage||10,y=r.dataset.layout||"card",k=r.dataset.engineId,f=r.dataset.thumbnailPosition,g=r.dataset.thumbnailSize||"medium",v=r.dataset.preset;if(!b||!k){o&&o.removeClass("blocked");return}a?(n.posts_per_page=s.dataset.loadItems,n.offset=x):(n.posts_per_page=x,n.current_page=r.dataset.currentPage||1);var C=r.find(".jankx-posts"),j=C.dataset.tax_query;j&&(n.tax_query=JSON.stringify(j));var L={action:jkx_post_layout.action,post_type:b,layout:y,engine_id:k,thumb_pos:f,thumb_size:g};v&&(L.data_preset=v),L=Object.assign(L,n),jankx_ajax(jkx_post_layout.ajax_url,"GET",L,{beforeSend:function(){},complete:function(e){var t=C.dataset.mode||"append";if(4===e.readyState&&200===e.status){var a=e.responseJSON||{},s=a.success||!1;if(s){var n=a.data||{},l=C.dataset.contentWrapper?C.find(C.dataset.contentWrapper):C;if("replace"===t?l.html(n.content):l.appendHTML(n.content),["carousel","preset-3","preset-5"].indexOf(y)>=0){var u=c.find(".splide"),d=u.getAttribute("id").replaceAll(/-/ig,"_");window[d]&&window[d].destroy(),configs=window[d+"__configs"]||{},window[d]=new Splide(u,configs),window[d].mount()}n.next_offset>0&&r.setAttribute("data-posts-per-page",n.next_offset)}var p=jkx_post_layout["jankx_tabs_"+k+"_"+y+"_"+b];window[p]&&window[p](l,L,s),o&&o.removeClass("blocked")}}})}}function jankxPostLayoutSetupLightboxSources(e,t){e.props.sources=[],e.props.currentIndex=0,t.forEach(function(t){var a=t.dataset||{};a.src&&((a.galleryIndex?parseInt(a.galleryIndex):0)!=e.props.currentIndex&&t.setAttribute("data-gallery-index",e.props.currentIndex),t.addEventListener("click",function(t){var a=t.target,s="A"===a.tagName?a.querySelector("has-lightbox"):a.findParent(".has-lightbox"),r=s.dataset.galleryIndex?parseInt(s.dataset.galleryIndex):0;e.open(r)}),e.props.sources.push(a.src),e.props.currentIndex+=1)})}function jankxPostLayoutSetupLightbox(){var e=document.querySelectorAll(".jankx-post-layout-wrap");for(i=0;i<e.length;i++){var t=e[i],a=t.querySelectorAll(".has-lightbox");!(a.length<=0)&&(window[camelize(t.getAttribute("id"))]=new FsLightbox,jankxPostLayoutSetupLightboxSources(window[camelize(t.getAttribute("id"))],a))}}function jankxSetupMobileCarouselList(e){for(var t=e.querySelectorAll("li.the-tab"),a=0;a<t.length;a++)t[a].addClass("splide__slide")}function jankxSetupMobileCarousel(e){var t=e.querySelector("ul.post-layout-tabs");jankxSetupMobileCarouselList(e),t.removeClass("post-layout-tabs"),t.addClass("splide__list"),carouselHTML='<div class="tabs-carousel-wrap"><div class="splide__track">'+t.outerHTML+"</div></div>",t.outerHTML=carouselHTML,window.jankxCarouselTabs["tabsCarouselWrap"+i]=new Splide(e.querySelector(".tabs-carousel-wrap"),{perPage:e.dataset.columns||2,arrows:!0,pagination:!1}),window.jankxCarouselTabs["tabsCarouselWrap"+i].mount(),e.addClass("is-tabs-carousel")}function jankxDestroyMobileCarouselList(e){for(var t=e.querySelectorAll("li.the-tab"),a=0;a<t.length;a++)t[a].removeClass("splide__slide")}function jankxDestroyMobileCarousel(e){e.removeClass("is-tabs-carousel"),window.jankxCarouselTabs["tabsCarouselWrap"+i]&&window.jankxCarouselTabs["tabsCarouselWrap"+i].destroy();var t=e.querySelector("ul.splide__list");t.addClass("post-layout-tabs"),t.removeClass("splide__list"),e.querySelector(".tabs-carousel-wrap").outerHTML=t.outerHTML,jankxDestroyMobileCarouselList(e)}function jankxMakeTabsIsCarouselOnMobile(){var e=document.querySelectorAll("[data-tab-carousel]");for(i=0,breakpoint=(window.jankx||{}).mobile_breakpoint||600,isMobile=window.innerWidth<=breakpoint;i<e.length;i++){var t=e[i];if(hasTrackList=t.querySelector(".tabs-carousel-wrap"),isMobile){if(hasTrackList)continue;jankxSetupMobileCarousel(t)}else{if(!hasTrackList)continue;jankxDestroyMobileCarousel(t)}jankxPostLayoutCreateTabLinksTrigger(t.querySelectorAll(".the-tab.has-event a"))}}function jankx_post_layout_init(){jankxPostLayoutCreateTabLinksTrigger(document.querySelectorAll(".jankx-tabs.post-layout-tabs>li.has-event>a")),jankxPostLayoutCreateLoadMoreButtonTrigger(document.querySelectorAll("[data-load-more]")),jankxPostLayoutSetupLightbox(),document.querySelectorAll("[data-tab-carousel]").length>0&&(jankxMakeTabsIsCarouselOnMobile(),window.addEventListener("resize",jankxMakeTabsIsCarouselOnMobile))}window.jankxCarouselTabs={},document.addEventListener("DOMContentLoaded",jankx_post_layout_init);