!function(e,t){if("object"==typeof exports&&"object"==typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{var a=t();for(var s in a)("object"==typeof exports?exports:e)[s]=a[s]}}(self,(()=>{return e={r:e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}},t={},(()=>{function e(e){for(i=0;i<e.length;i++)e[i].addEventListener("click",t)}function t(e){e.preventDefault();var t=e.target,a=t.dataset.loadMore||!1,s=a?t:t.parent(),r=null,o=null,n={};if(a)r=document.getElementById(s.dataset.loadMore);else{if((o=s.findParent(".jankx-tabs")).hasClass("blocked"))return;var i=s.dataset.type,l=s.dataset.typeName,d=s.dataset.objectId;if(!(i&&l&&d))return;Object.assign(n,{data_type:i,type_name:l,object_id:d});var u=o.find(".the-tab.active"),c=o.findParent(".jankx-parent-layout");r=c.find(".jankx-post-layout-wrap"),o.addClass("blocked"),u.removeClass("active"),s.addClass("active")}if(r){var p=r.dataset.postType,f=r.dataset.postsPerPage||10,b=r.dataset.layout||"card",y=r.dataset.engineId,v=r.dataset.thumbnailPosition,_=r.dataset.thumbnailSize||"medium",x=r.dataset.preset;if(p&&y){a?(n.posts_per_page=s.dataset.loadItems,n.offset=f):(n.posts_per_page=f,n.current_page=r.dataset.currentPage||1);var g=r.find(".jankx-posts"),m=g.dataset.tax_query;m&&(n.tax_query=JSON.stringify(m));var w={action:jkx_post_layout.action,post_type:p,layout:b,engine_id:y,thumb_pos:v,thumb_size:_};x&&(w.data_preset=x),w=Object.assign(w,n),jankx_ajax(jkx_post_layout.ajax_url,"GET",w,{beforeSend:function(){},complete:function(e){var t=g.dataset.mode||"append";if(4===e.readyState&&200===e.status){var a=e.responseJSON||{},s=a.success||!1;if(s){var n=a.data||{},i=g.dataset.contentWrapper?g.find(g.dataset.contentWrapper):g;"replace"===t?i.html(n.content):i.appendHTML(n.content),["carousel","preset-3","preset-5"].indexOf(b)>=0&&swiffyslider.init(),n.next_offset>0&&r.setAttribute("data-posts-per-page",n.next_offset)}var l=jkx_post_layout["jankx_tabs_"+y+"_"+b+"_"+p];window[l]&&window[l](i,w,s),o&&o.removeClass("blocked")}}})}else o&&o.removeClass("blocked")}}function a(e,t){e.props.sources=[],e.props.currentIndex=0,t.forEach((function(t){var a=t.dataset||{};a.src&&((a.galleryIndex?parseInt(a.galleryIndex):0)!=e.props.currentIndex&&t.setAttribute("data-gallery-index",e.props.currentIndex),t.addEventListener("click",(function(t){var a=t.target,s="A"===a.tagName?a.querySelector("has-lightbox"):a.findParent(".has-lightbox"),r=s.dataset.galleryIndex?parseInt(s.dataset.galleryIndex):0;e.open(r)})),e.props.sources.push(a.src),e.props.currentIndex+=1)}))}function s(e){var t=e.querySelector("ul.post-layout-tabs");!function(e){for(var t=e.querySelectorAll("li.the-tab"),a=0;a<t.length;a++)t[a].addClass("splide__slide")}(e),t.removeClass("post-layout-tabs"),t.addClass("splide__list"),carouselHTML='<div class="tabs-carousel-wrap"><div class="splide__track">'+t.outerHTML+"</div></div>",t.outerHTML=carouselHTML,window.jankxCarouselTabs["tabsCarouselWrap"+i]=new Splide(e.querySelector(".tabs-carousel-wrap"),{perPage:e.dataset.columns||2,arrows:!0,pagination:!1}),window.jankxCarouselTabs["tabsCarouselWrap"+i].mount(),e.addClass("is-tabs-carousel")}function r(e){e.removeClass("is-tabs-carousel"),window.jankxCarouselTabs["tabsCarouselWrap"+i]&&window.jankxCarouselTabs["tabsCarouselWrap"+i].destroy();var t=e.querySelector("ul.splide__list");t.addClass("post-layout-tabs"),t.removeClass("splide__list"),e.querySelector(".tabs-carousel-wrap").outerHTML=t.outerHTML,function(e){for(var t=e.querySelectorAll("li.the-tab"),a=0;a<t.length;a++)t[a].removeClass("splide__slide")}(e)}function o(){var t=document.querySelectorAll("[data-tab-carousel]"),a=window.jankx||{};for(breakpoint=a.mobile_breakpoint||600,isMobile=window.innerWidth<=breakpoint,i=0;i<t.length;i++){var o=t[i];if(hasTrackList=o.querySelector(".tabs-carousel-wrap"),isMobile){if(hasTrackList)continue;s(o)}else{if(!hasTrackList)continue;r(o)}e(o.querySelectorAll(".the-tab.has-event a"))}}window.jankxCarouselTabs={},document.addEventListener("DOMContentLoaded",(function(){e(document.querySelectorAll(".jankx-tabs.post-layout-tabs>li.has-event>a")),function(e){for(i=0;i<e.length;i++)e[i].addEventListener("click",t)}(document.querySelectorAll("[data-load-more]")),function(){var e=document.querySelectorAll(".jankx-post-layout-wrap");for(i=0;i<e.length;i++){var t=e[i],s=t.querySelectorAll(".has-lightbox");s.length<=0||(window[camelize(t.getAttribute("id"))]=new FsLightbox,a(window[camelize(t.getAttribute("id"))],s))}}(),document.querySelectorAll("[data-tab-carousel]").length>0&&(o(),window.addEventListener("resize",o))})),window.addEventListener("load",(function(){swiffyslider.init()}))})(),(()=>{"use strict";e.r(t)})(),t;var e,t}));
//# sourceMappingURL=post-layout.min.js.map